(this.webpackJsonpevfleets_client=this.webpackJsonpevfleets_client||[]).push([[0],{109:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(0),s=a.n(i),c=a(9),l=a.n(c),r=(a(85),a(39)),o=a(40),u=a(50),d=a(49),j=a(41),b=a(5),h=a(159),m=a(177),p=a(179),O=a(158),x=a(173),f=a(37),g=a(174),v=a(160),y=a(162),C=a(161),E=a(28),D=a.n(E),_=a(157),N=a(153),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleChange=function(e){return function(t){console.log(e,t.target.value),"city"===e&&D.a.get("/routes/"+t.target.value).then((function(e){n.setState({routes:e.data.options,selectedroutes:[]})})),n.setState(Object(j.a)({},e,t.target.value),(function(){D.a.post("/tabledata",n.state).then((function(e){n.props.setTableData(e.data.data.filter((function(e){return n.state.selectedroutes.includes(e.route_id)})))})).catch((function(e){console.log(n.state)}))}))}},n.state={city:"",selectedroutes:[],bus_type:"",bus_cost:0,utility:0,fuel_price:0,demand_charge:0,dc_efficiency:.92,l2_efficiency:0,cities:[],routes:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;D.a.get("/cities").then((function(t){e.setState(t.data)}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(n.jsx)("div",{className:t.root,children:Object(n.jsxs)(N.a,{container:!0,spacing:10,children:[Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsxs)(_.a,{className:t.paper,children:[Object(n.jsx)(f.a,{variant:"h4",gutterBottom:!0,children:"1. City / Routes"}),Object(n.jsxs)(N.a,{container:!0,justify:"center",children:[Object(n.jsx)(N.a,{item:!0,xs:6,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(m.a,{id:"city-select-label",children:"Select City"}),Object(n.jsx)(x.a,{labelId:"city-select-label",id:"city-select",value:this.state.city,onChange:this.handleChange("city"),children:this.state.cities.map((function(e){return Object(n.jsx)(p.a,{value:e.value,children:e.label},e.value)}))})]})}),Object(n.jsx)(N.a,{item:!0,xs:6,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(m.a,{id:"routes-select-label",children:"Select routes to analyse"}),Object(n.jsx)(x.a,{labelId:"routes-select-label",id:"routes-select",multiple:!0,value:this.state.selectedroutes,onChange:this.handleChange("selectedroutes"),input:Object(n.jsx)(h.a,{}),renderValue:function(e){return e.join(", ")},children:this.state.routes.map((function(t){return Object(n.jsxs)(p.a,{value:t.value,children:[Object(n.jsx)(g.a,{checked:e.state.selectedroutes.indexOf(t.value)>-1}),Object(n.jsx)(v.a,{primary:t.label})]},t.value)}))})]})})]})]})}),Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsxs)(_.a,{className:t.paper,children:[Object(n.jsx)(f.a,{variant:"h4",gutterBottom:!0,children:"2. Price Parameters"}),Object(n.jsxs)(N.a,{container:!0,justify:"center",children:[Object(n.jsx)(N.a,{item:!0,xs:3,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(C.a,{id:"fuel-price-helper-text",children:"Fuel price"}),Object(n.jsx)(h.a,{id:"numeric-fuel-cost",endAdornment:Object(n.jsx)(y.a,{position:"end",children:"$/gallon eq"}),inputProps:{min:0,style:{textAlign:"end"}},value:this.state.fuel_price,type:"number",onChange:this.handleChange("fuel_price")})]})}),Object(n.jsx)(N.a,{item:!0,xs:3,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(C.a,{id:"utility-price-helper-text",children:"Cost of Electric Bus"}),Object(n.jsx)(h.a,{id:"numeric-bus-cost",startAdornment:Object(n.jsx)(y.a,{position:"start",children:"$"}),value:this.state.bus_cost,type:"number",onChange:this.handleChange("bus_cost")})]})}),Object(n.jsx)(N.a,{item:!0,xs:3,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(C.a,{id:"utility-price-helper-text",children:"Utility charges"}),Object(n.jsx)(h.a,{id:"numeric-utility-cost",endAdornment:Object(n.jsx)(y.a,{position:"end",children:"$/kWh"}),inputProps:{min:0,style:{textAlign:"end"}},value:this.state.utility,type:"number",onChange:this.handleChange("utility")})]})}),Object(n.jsx)(N.a,{item:!0,xs:3,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(C.a,{id:"demand-price-helper-text",children:"Demand Charge"}),Object(n.jsx)(h.a,{id:"numeric-demand-cost",endAdornment:Object(n.jsx)(y.a,{position:"end",children:"$/kW-month"}),inputProps:{min:0,style:{textAlign:"end"}},value:this.state.demand_charge,type:"number",onChange:this.handleChange("demand_charge")})]})})]})]})}),Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsxs)(_.a,{className:t.paper,children:[Object(n.jsx)(f.a,{variant:"h4",gutterBottom:!0,children:"3. Vehicle Parameters"}),Object(n.jsxs)(N.a,{container:!0,justify:"center",children:[Object(n.jsx)(N.a,{item:!0,xs:6,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(m.a,{id:"routes-select-label",children:"Select bus type"}),Object(n.jsx)(x.a,{labelId:"routes-select-label",id:"routes-select",value:this.state.bus_type,onChange:this.handleChange("bus_type"),input:Object(n.jsx)(h.a,{}),children:[{label:"30 Feet",value:"30ft"},{label:"40 Feet",value:"40ft"},{label:"60 Feet",value:"60ft"}].map((function(e){return Object(n.jsx)(p.a,{value:e.value,children:e.label},e.value)}))})]})}),Object(n.jsx)(N.a,{item:!0,xs:6,align:"center",children:Object(n.jsxs)(O.a,{className:t.formControl,children:[Object(n.jsx)(C.a,{id:"demand-price-helper-text",children:"DC Charging efficiency"}),Object(n.jsx)(h.a,{id:"numeric-dc-efficiency",endAdornment:Object(n.jsx)(y.a,{position:"end",children:"Decimal %"}),inputProps:{min:0,style:{textAlign:"end"}},value:this.state.dc_efficiency,type:"number",onChange:this.handleChange("dc_efficiency")})]})})]})]})})]})})}}]),a}(i.Component),T=Object(b.a)((function(e){return{root:{flexGrow:1},formControl:{margin:"0 auto",minWidth:220,maxWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)},paper:{padding:e.spacing(2),color:e.palette.text.secondary}}}),{withTheme:!0})(S),A=a(73),k=a(74),w=a(164),P=a(163),F=a(51),$=a(165),B=Object(k.a)({palette:{primary:{light:P.a[300],main:P.a[500],dark:P.a[700]},secondary:{light:F.a[300],main:F.a[500],dark:F.a[700]},background:{default:"#f5f5f5"}}});var M=function(e){return function(t){return Object(n.jsxs)(w.a,{theme:B,children:[Object(n.jsx)($.a,{}),Object(n.jsx)(e,Object(A.a)({},t))]})}},H=a(36),I=a(168),L=a(170),W=a(172),U=a(166),R=a(169),V=a(171),z=a(167),J=a(178),q=a(176),G=Object(b.a)((function(e){return{head:{textAlign:"center"},body:{fontSize:14,textAlign:"center"}}}))(U.a),K=Object(b.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(z.a),Q=Object(I.a)({table:{minWidth:700},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}),X=[{label:"Route ID",value:"route_id"},{label:"No of buses",value:"No of buses"},{label:"TCO per route - D ($/lifetime)",value:"TCO per route - D"},{label:"Level of Service -D",value:"Level of Service -D"},{label:"Emissions -D (ton CO2/yr)",value:"Emissions -D"},{label:"Health impact -D (USD Millions 2020)",value:"Health impact -D"},{label:"",value:""},{label:"TCO <=",value:""},{label:"Emissions <=",value:""},{label:"Technically Feasible?",value:"feasible"},{label:"",value:""},{label:"TCO per route - E ($/lifetime)",value:"TCO per route - E"},{label:"Level of Service -E",value:"Level of Service -E"},{label:"Emissions -E (ton CO2/yr)",value:"Emissions -E"},{label:"Health impact -E (USD Millions 2020)",value:"Health impact -E"}];function Y(e){var t=Q(),a=Object(i.useState)(0),s=Object(H.a)(a,2),c=s[0],l=s[1],r=Object(i.useState)(100),o=Object(H.a)(r,2),u=o[0],d=o[1],j=Object(i.useState)(100),b=Object(H.a)(j,2),h=b[0],m=b[1],p=Object(i.useState)("asc"),O=Object(H.a)(p,2),x=O[0],f=O[1],g=e.tabledata;g.forEach((function(e){e.tcoComp=e["TCO per route - E"]<=e["TCO per route - D"]*(u/100),e.emissionsComp=e["Emissions -E"]<=e["Emissions -D"]*(h/100),e.feasible=e.tcoComp&&e.emissionsComp?"yes":"no"})),g.sort((function(e,t){var a="asc"===x?1:-1;return e[X[c].value]<t[X[c].value]?a:e[X[c].value]>t[X[c].value]?-a:0}));var v=function(e,t){return"TCO per route - E"===t?e.tcoComp?"green":"red":"Emissions -E"===t?e.emissionsComp?"green":"red":"feasible"===t?"yes"===e.feasible?"green":"red":"initial"},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var i=e<0?"-":"",s=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),c=s.length>3?s.length%3:0;return i+(c?s.substr(0,c)+n:"")+s.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?a+Math.abs(e-s).toFixed(t).slice(2):"")}catch(l){console.log(l)}},E=function(e,a){return Object(n.jsx)(G,{align:a>1?"right":"left",sortDirection:c===a&&x,children:Object(n.jsxs)(J.a,{active:c===a,direction:c===a?x:"asc",onClick:function(){return function(e){c===e?f("asc"===x?"desc":"asc"):(f("asc"),l(e))}(a)},children:[e.label,c===a?Object(n.jsx)("span",{className:t.visuallyHidden,children:"desc"===x?"sorted descending":"sorted ascending"}):null]})})};return Object(n.jsx)(R.a,{component:_.a,style:{marginTop:80},children:Object(n.jsxs)(L.a,{className:t.table,"aria-label":"customized table",children:[Object(n.jsx)(V.a,{children:Object(n.jsxs)(z.a,{children:[X.slice(0,7).map(E),Object(n.jsxs)(G,{children:["TCO <=",Object(n.jsx)(q.a,{id:"numeric-tco-comp",endAdornment:Object(n.jsx)(y.a,{position:"end",children:"%"}),inputProps:{min:0,style:{textAlign:"center"}},margin:"dense",value:u,type:"number",onChange:function(e){return d(e.target.value)}})]}),Object(n.jsxs)(G,{children:["Emissions <=",Object(n.jsx)(q.a,{id:"numeric-emissions-comp",endAdornment:Object(n.jsx)(y.a,{position:"end",children:"%"}),inputProps:{min:0,style:{textAlign:"center"}},margin:"dense",value:h,type:"number",onChange:function(e){return m(e.target.value)}})]}),X.slice(9).map((function(e,t){return E(e,t+9)}))]})}),Object(n.jsx)(W.a,{children:g.map((function(e){return Object(n.jsx)(K,{children:X.map((function(t,a){return Object(n.jsx)(G,{align:a>1?"right":"left",style:{backgroundColor:v(e,t.value)},children:t.label.includes("$")?C(e[t.value]):e[t.value]})}))},e.route_id)}))})]})})}var Z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={tableData:[]},e.setTableData=function(t){e.setState({tableData:t})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.classes;return console.log(this.state),Object(n.jsxs)("div",{className:e.root,children:[Object(n.jsx)(f.a,{variant:"h1",component:"h2",gutterBottom:!0,align:"center",children:"EV Fleets"}),Object(n.jsx)("div",{style:{width:"70%",margin:"0 auto"},children:Object(n.jsx)(T,{setTableData:this.setTableData})}),Object(n.jsx)("div",{style:{width:"95%",margin:"0 auto"},children:Object(n.jsx)(Y,{tabledata:this.state.tableData})})]})}}]),a}(i.Component),ee=M(Object(b.a)((function(e){return{root:{paddingTop:5*e.spacing.unit,paddingBottom:15*e.spacing.unit}}}))(Z));a(108);D.a.defaults.baseURL="https://www.ocf.berkeley.edu/~electrify/run.fcgi",D.a.defaults.headers.post["Content-Type"]="application/json",l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(ee,{})}),document.getElementById("root"))},85:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.28478924.chunk.js.map